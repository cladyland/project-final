## [REST API](http://localhost:8080/doc)

## Концепция:
- Spring Modulith
  - [Spring Modulith: достигли ли мы зрелости модульности](https://habr.com/ru/post/701984/)
  - [Introducing Spring Modulith](https://spring.io/blog/2022/10/21/introducing-spring-modulith)
  - [Spring Modulith - Reference documentation](https://docs.spring.io/spring-modulith/docs/current-SNAPSHOT/reference/html/)

```
  url: jdbc:postgresql://localhost:5432/jira
  username: jira
  password: JiraRush
```
- Есть 2 общие таблицы, на которых не fk
  - _Reference_ - справочник. Связь делаем по _code_ (по id нельзя, тк id привязано к окружению-конкретной базе)
  - _UserBelong_ - привязка юзеров с типом (owner, lead, ...) к объекту (таска, проект, спринт, ...). FK вручную будем проверять

## Аналоги
- https://java-source.net/open-source/issue-trackers

## Тестирование
- https://habr.com/ru/articles/259055/

Список выполненных задач:
1. Разобраться со структурой проекта (onboarding).
2. Удалить социальные сети: vk, yandex.
3. Вынести чувствительную информацию в отдельный проперти файл. Значения этих проперти должны считываться при старте сервера из переменных окружения машины.
4. Переделать тесты так, чтоб во время тестов использовалась in memory БД (H2), а не PostgreSQL.
5. Написать тесты для всех публичных методов контроллера ProfileRestController.
6. Добавить новый функционал: добавления тегов к задаче (rest, backend).    
*дополнительно от себя: получение списка задач по названию тега*
7. Добавить возможность подписываться на задачи, которые не назначены на текущего пользователя (backend, REST).
8. Добавить автоматический подсчет времени сколько задача находилась в работе и тестировании (backend, REST).    
*от себя: реализовала через добавление новой сущности TaskTime, которая хранит информацию о времени разработки и тесторивания задачи. При смене статуса задания на ready или done, срабатывает StatusListeners, через который вызываются соответствующие методы TaskTimeService для вычисления и записи значений. Так же при смене статуса задания обратно в ready или done, учитываются предыдущие значения*
9. Написать Dockerfile для основного сервера
10. Написать docker-compose файл для запуска контейнера сервера вместе с БД и nginx.
11. Добавить локализацию минимум на двух языках для шаблонов писем и стартовой страницы index.html.
12. Реализовать бэклог (backlog) – полный список задач (с пейджингом), которые должны быть выполнены и еще не относятся ни к какому спринту. (бек + фронт).

Не выполнено:
13. Переделать механизм распознавания «свой-чужой» между фронтом и беком с JSESSIONID на JWT.    
*причина: не удалось добавить отправку токена от клиента через header, а также настроить oaut2 для работы с JWT. Также при успешной проверке токена возвращалась ошибка 403, т.е. после авторизации пользователь терял доступ к сайту*

*p.s. еще один интересный баг: если в пути есть "view", например: localhost:8080/view/login, то невозможно переключить локализацию, параметры запроса игнорируются (cookies не обновляются)*

Как запустить (для моих менторов):
1. Скачать zip-архив по ссылке, которую я прикрепила в комментариях к форме (если что-то пошло не так - сообщите, скину в личку)
2. Распаковать архив
3. Запустить Docker
4. Открыть командную строку
5. Перейти в папку jira-rush-vika-kov
6. Ввести команду: docker-compose up --build -d
7. После запуска открыть браузер и перейти по адресу localhost:80    
*альтернатива для шагов 5-6: использовать абсолютный путь к файлу docker-compose:    
docker-compose -f \ваш абсолютный путь\docker-compose.yaml up --build -d*